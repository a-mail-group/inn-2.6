.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SCANSPOOL 8"
.TH SCANSPOOL 8 "2015-09-12" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
scanspool \- Perform a sanity scan over all articles in news spool
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBscanspool\fR [\fB\-cnv\fR] [\fB\-a\fR \fIactive-file\fR] [\fB\-s\fR \fIspool-dir\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBscanspool\fR is a Perl script for use with a \fItradspool\fR article spool.
It will scan the \fIactive\fR file as well as all articles in the spool and
report on the errors it encounters.  As this may take a while, using the
\&\fB\-v\fR switch is recommended to see how far the program has progressed.
.PP
First, \fBscanspool\fR scans the \fIactive\fR file, noting problems such as:
.IP "\(bu" 4
malformed lines;
.IP "\(bu" 4
newsgroups aliased to a non-existent newsgroup;
.IP "\(bu" 4
newsgroups aliased to a newsgroup that is also aliased.
.PP
Then it will examine all articles under your news spool directory,
complaining about articles that:
.IP "\(bu" 4
have a basename that starts with a leading 0;
.IP "\(bu" 4
have a basename that is out of range according to the \fIactive\fR file;
.IP "\(bu" 4
do not contain a Newsgroups: header line;
.IP "\(bu" 4
are all header and no text;
.IP "\(bu" 4
are in a directory for which there is no newsgroup in the \fIactive\fR file;
.IP "\(bu" 4
are in a newsgroup to which they do not belong.
.PP
\&\fBscanspool\fR understands aliased newsgroups.  Thus, if an article is posted
to foo.old.name that is aliased to foo.bar, it will be expected to
be found under foo.bar and not foo.old.name.
.PP
Articles posted to a newsgroup of status \f(CW\*(C`j\*(C'\fR or \f(CW\*(C`x\*(C'\fR (the fourth field
of the \fIactive\fR file) will be expected to show up under the \fIjunk\fR group.
.PP
\&\fBscanspool\fR assumes that the path of a valid newsgroup's directory
from the root of the spool tree will not contain any \f(CW\*(C`.\*(C'\fR character.
Thus, directories such as \fIout.going\fR, \fItmp.dir\fR, \fIin.coming\fR and
\&\fInews.archive\fR will not be searched.  This program also assumes that
article basenames contain only decimal digits.  Last, files under
the top level directory \fIlost+found\fR are not scanned.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-a\fR \fIactive-file\fR" 4
.IX Item "-a active-file"
The \fIactive\fR file to use; \fIpathdb\fR/active is the default.
.IP "\fB\-c\fR" 4
.IX Item "-c"
Only check article filenames.  \fBscanspool\fR will therefore not actually
scan the Newsgroups: header field of the articles.
.IP "\fB\-n\fR" 4
.IX Item "-n"
Don't throttle \fBinnd\fR while scanning.
.IP "\fB\-s\fR \fIspool-dir\fR" 4
.IX Item "-s spool-dir"
The root of the spool tree; \fIpatharticles\fR is the default.
.IP "\fB\-v\fR" 4
.IX Item "-v"
Setting this flag enables a verbose mode.  \fBscanspool\fR will then print
which newsgroup is currently worked upon.  It will list all the articles
found in non\-\fIactive\fR directories (that is to say articles sorted into
groups no longer present in the \fIactive\fR file), rather than just printing
the group once.
.SH "DIAGNOSTICS"
.IX Header "DIAGNOSTICS"
The output of \fBscanspool\fR will start with one of the following forms:
.ie n .IP """FATAL:"" (to stderr)" 4
.el .IP "\f(CWFATAL:\fR (to stderr)" 4
.IX Item "FATAL: (to stderr)"
Fatal or internal error.
.ie n .IP """WARN:"" (to stderr)" 4
.el .IP "\f(CWWARN:\fR (to stderr)" 4
.IX Item "WARN: (to stderr)"
\&\fIactive\fR or article format problem, newsgroup alias problem, \fIfind\fR\|(1)
error, article open error.
.ie n .IP """path/123:"" (to stdout)" 4
.el .IP "\f(CWpath/123:\fR (to stdout)" 4
.IX Item "path/123: (to stdout)"
Issues such as:
.RS 4
.IP "\(bu" 4
basename starts with 0;
.IP "\(bu" 4
article number out of range;
.IP "\(bu" 4
article in the wrong directory;
.IP "\(bu" 4
article in a directory not related to an \fIactive\fR non-aliased newsgroup.
.RE
.RS 4
.RE
.ie n .IP """\et ..."" (to stdout)" 4
.el .IP "\f(CW\et ...\fR (to stdout)" 4
.IX Item "t ... (to stdout)"
Verbose messages start with a tab.
.SH "BUGS"
.IX Header "BUGS"
\&\fBscanspool\fR is unable to detect and properly deal with spool formats
other than tradspool.  However, if the files that store your articles
are named other than just all-digits, they will simply be skipped
(and your \fIactive\fR is still checked).
.PP
\&\fBscanspool\fR only considers the first line of the Newsgroups: header field.
Continuation lines are not taken into account.
.SH "HISTORY"
.IX Header "HISTORY"
\&\fBscanspool\fR was written by Landon Curt Noll (chongo was here  /\e../\e).
.PP
This manual page was written by Florian Schlichting, largely based on
comments in the script.
.PP
\&\f(CW$Id:\fR scanspool.pod 9301 2011\-08\-04 21:09:11Z iulius $
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIactive\fR\|(5).
