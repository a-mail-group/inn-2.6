.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "CTLINND 8"
.TH CTLINND 8 "2015-09-12" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
ctlinnd \- Control the main InterNetNews daemon
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBctlinnd\fR [\fB\-hs\fR] [\fB\-t\fR \fItimeout\fR] [\fIcommand\fR [\fIargument\fR ...]]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBctlinnd\fR sends a message to the control channel of \fIinnd\fR\|(8), the main
InterNetNews daemon.
.PP
In the normal mode of behavior, the message is sent to the server, which
then performs the requested action and sends back a reply with a text
message and an exit code for \fBctlinnd\fR.  If the server successfully
performed the command, \fBctlinnd\fR will print the reply on standard output
and exit with a status of zero.  If the server could not perform the
command, it will direct \fBctlinnd\fR to exit with a status of one.  By
default, \fBctlinnd\fR will wait forever for a response from \fBinnd\fR; this
can be changed with the \fB\-t\fR flag.
.PP
The \f(CW\*(C`shutdown\*(C'\fR, \f(CW\*(C`xabort\*(C'\fR, and \f(CW\*(C`xexec\*(C'\fR commands do not generate a reply,
since they cause \fBinnd\fR to exit.  After these commands, \fBctlinnd\fR will
always exit silently with a status of zero.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-h\fR" 4
.IX Item "-h"
Prints a command summary.  If a command is given along with the \fB\-h\fR
flag, only the usage for that command will be given.
.IP "\fB\-s\fR" 4
.IX Item "-s"
If the command was successful, don't print the output from \fBinnd\fR.
.IP "\fB\-t\fR \fItimeout\fR" 4
.IX Item "-t timeout"
Specifies how long to wait for the reply from the server, for commands
other than \f(CW\*(C`shutdown\*(C'\fR, \f(CW\*(C`xabort\*(C'\fR, and \f(CW\*(C`xexec\*(C'\fR.  \fItimeout\fR is the number
of seconds to wait.  A value of zero says to wait forever, and a value
less than zero says not to wait at all but just exit immediately with
status zero.  When waiting for a reply, \fBctlinnd\fR will check every two
minutes to be sure the server is still running, to make it less likely
that \fBctlinnd\fR will just hang.
.Sp
The default is zero, indicating that \fBctlinnd\fR should wait forever.
.SH "COMMANDS"
.IX Header "COMMANDS"
Here is the complete list of supported commands.  Note that nearly all
commands have a fixed number of arguments.  If a parameter may be an empty
string, it is still necessary to pass the empty string to \fBctlinnd\fR as an
argument (specified in the shell as two adjacent quotes, like \f(CW\*(Aq\*(Aq\fR).
.IP "addhist \fImessage-id\fR \fIarrival\fR \fIexpires\fR \fIposted\fR \fItoken\fR" 4
.IX Item "addhist message-id arrival expires posted token"
Add an entry to the history database for \fImessage-id\fR.  The angle
brackets around the message-ID are optional.  It should normally be
protected from the shell with single quotes.
.Sp
\&\fIarrival\fR, \fIexpires\fR, and \fIposted\fR should be the number of seconds
since epoch and indicate when the article arrived, when it expires (via
the Expires: header), and when it was posted (given in the Date: header),
respectively.  \fIexpires\fR should be \f(CW0\fR if the article doesn't have an
Expires: header.  \fItoken\fR is the storage \s-1API\s0 token for the article, and
may be empty.
.Sp
This command can only be used while the server is running, and will be
rejected if the server is paused or throttled.
.IP "allow \fIreason\fR" 4
.IX Item "allow reason"
Allow remote connections, reversing a prior \f(CW\*(C`reject\*(C'\fR command.  \fIreason\fR
must be the same text given to the \f(CW\*(C`reject\*(C'\fR command, or the empty string
(which matches any reason).
.IP "begin \fIsite\fR" 4
.IX Item "begin site"
Begin feeding \fIsite\fR.  The server will rescan the \fInewsfeeds\fR file to
find the specified site and set up a newsfeed for it.  If the site already
existed, a \f(CW\*(C`drop\*(C'\fR for that site is done first.  This command is
forwarded; see \s-1NOTES\s0 below.
.IP "cancel \fImessage-id\fR" 4
.IX Item "cancel message-id"
Remove the article with the specified message-ID from the local system.
This does not generate a cancel control message; it only affects the local
system.  The angle brackets around the message-ID are optional.  It should
normally be protected from the shell with single quotes (and not double
quotes).  For instance:
.Sp
.Vb 1
\&    ctlinnd cancel \*(Aqtest@foo.bar\*(Aq
.Ve
.Sp
Note that the history database is updated with the specified message-ID
so if an article with the same message-ID is afterwards received, it will
be rejected; it is useful for rejecting spam before it arrives.
.Sp
If the server is throttled manually, this command causes it to briefly
open the history database.  If the server is paused or throttled for any
other reason, this command is rejected.
.IP "changegroup \fIgroup\fR \fIstatus\fR" 4
.IX Item "changegroup group status"
The newsgroup \fIgroup\fR is changed so that its status (the fourth field in
the \fIactive\fR file) becomes \fIstatus\fR.  This may be used to make an existing
group moderated or unmoderated, for example.
.Sp
This command, unlike \f(CW\*(C`newgroup\*(C'\fR or \f(CW\*(C`rmgroup\*(C'\fR, can only be used while the
server is running, and will be rejected if the server is paused or
throttled.
.IP "checkfile" 4
.IX Item "checkfile"
Check the syntax of the \fInewsfeeds\fR file and display a message if any
errors are found.  The details of the errors are reported to syslog.
.IP "drop \fIsite\fR" 4
.IX Item "drop site"
Flush and drop \fIsite\fR from the server's list of active feeds.  This
command is forwarded; see \s-1NOTES\s0 below.
.IP "feedinfo \fIsite\fR" 4
.IX Item "feedinfo site"
Print detailed information about the state of the feed to \fIsite\fR, or
brief status about all feeds if \fIsite\fR is the empty string.
.IP "flush \fIsite\fR" 4
.IX Item "flush site"
Flush the buffer for the specified site.  The action taken depends on the
type of feed the site receives; see \fInewsfeeds\fR\|(5) for more information.
This is useful when the site is being fed by a file and batching is about
to start, or to cleanly shut down and respawn a channel feed.  If \fIsite\fR
is an empty string, all sites are flushed and the \fIactive\fR file and
history database are also flushed to disk.  This command is forwarded; see
\&\s-1NOTES\s0 below.
.Sp
Flushing the \fBinnfeed\fR channel feed is the recommended method of
restarting \fBinnfeed\fR to pick up new configuration.  \fBinnd\fR will spawn a
new \fBinnfeed\fR process while the old process shuts down cleanly.
.IP "flushlogs" 4
.IX Item "flushlogs"
Close the news and error log files and rename them to add \f(CW\*(C`.old\*(C'\fR to the
file name, then open fresh news and error logs.  The \fIactive\fR file and
history database are also flushed to disk.  Exploder and process channels
are reopened so that they properly take into account the new log files.
.IP "go \fIreason\fR" 4
.IX Item "go reason"
Re-open the history database and start accepting articles again, reversing
a previous \f(CW\*(C`pause\*(C'\fR or \f(CW\*(C`throttle\*(C'\fR command.  \fIreason\fR must be either the
empty string or match the text that was given to the earlier \f(CW\*(C`pause\*(C'\fR or
\&\f(CW\*(C`throttle\*(C'\fR command.
.Sp
If a \f(CW\*(C`reject\*(C'\fR command is in effect, this will also reverse it by doing
the equivalent of an \f(CW\*(C`allow\*(C'\fR command if the reason matches \fIreason\fR.
Likewise, if a \f(CW\*(C`reserve\*(C'\fR command had been given, this will clear the
reservation if \fIreason\fR matches the text that was given to \f(CW\*(C`reserve\*(C'\fR.
.Sp
The history database is automatically closed on \f(CW\*(C`throttle\*(C'\fR or \f(CW\*(C`pause\*(C'\fR
and reopened on \f(CW\*(C`go\*(C'\fR, so the history database can be replaced during the
pause or throttle without requiring an explicit \f(CW\*(C`reload\*(C'\fR command.  If any
other configuration files or the \fIactive\fR file were modified, a \f(CW\*(C`reload\*(C'\fR
command should be given to force the server to re-read those files.
.Sp
If the server throttled itself because it accumulated too many I/O errors,
this command will reset the error count.
.Sp
If \fBinnd\fR was not started with the \fB\-n y\fR flag, this command also does
the equivalent of a \f(CW\*(C`readers\*(C'\fR command with \f(CW\*(C`yes\*(C'\fR as the flag and
\&\fIreason\fR as the text.
.IP "hangup \fIchannel\fR" 4
.IX Item "hangup channel"
Close the socket for the specified incoming channel.  This may be useful
when an incoming connection appears to be hung (although \fBinnd\fR will
close idle connections automatically after a timeout).
.IP "help [\fIcommand\fR]" 4
.IX Item "help [command]"
Print a command summary for all commands, or just \fIcommand\fR if one is
specified.  This is equivalent to the \fB\-h\fR option.
.IP "kill \fIsignal\fR \fIsite\fR" 4
.IX Item "kill signal site"
Signal \fIsignal\fR is sent to the process underlying the specified site,
which must be a channel or exploder feed.  \fIsignal\fR may be a numeric
signal number or one of \f(CW\*(C`hup\*(C'\fR, \f(CW\*(C`int\*(C'\fR, or \f(CW\*(C`term\*(C'\fR; case is not
significant.
.IP "logmode" 4
.IX Item "logmode"
Cause the server to log its current operating mode to syslog.
.IP "lowmark \fIfile\fR" 4
.IX Item "lowmark file"
Reset the low water marks in the \fIactive\fR file based on the contents of
\&\fIfile\fR.  Each line in \fIfile\fR must be of the form:
.Sp
.Vb 1
\&    group low\-value
.Ve
.Sp
For example:
.Sp
.Vb 1
\&    comp.lang.c++ 243
.Ve
.Sp
This command is mostly used by \fBnews.daily\fR to update the \fIactive\fR file
after nightly expiration.
.IP "mode" 4
.IX Item "mode"
Print the server's operating mode as a multi-line summary of the
parameters and the operating state.  The parameters in the output
correspond to command-line flags to \fBinnd\fR and give the current settings
of those parameters that can be overridden by command-line flags.
.IP "name \fIchannel\fR" 4
.IX Item "name channel"
Print the name and relevant information for the given incoming or outgoing
channel, or for all channels if \fIchannel\fR is an empty string.  The
response is formatted as:
.Sp
.Vb 1
\&    <name>:<number>:<type>:<idle>:<status>
.Ve
.Sp
where <name> is the name of the channel, <number> is its number (generally
the same as the file descriptor assigned to it), <idle> is the idle time
for an \s-1NNTP\s0 channel or the process \s-1ID\s0 for a process channel, and <status>
is the status for \s-1NNTP\s0 channels.
.Sp
The type is one of the following values:
.Sp
.Vb 6
\&    control     Control channel for ctlinnd
\&    file        An outgoing file feed
\&    localconn   Local channel used by nnrpd and rnews for posting
\&    nntp        NNTP channel for remote connections
\&    proc        The process for a process feed
\&    remconn     The channel that accepts new remote connections
.Ve
.Sp
Channel status indicates whether the channel is paused or not.  Nothing is
shown unless the channel is paused, in which case \f(CW\*(C`paused\*(C'\fR is shown.  A
channel will be paused automatically if the number of remote connections
for that label in \fIincoming.conf\fR is greater than \fImax-connections\fR
within \fIhold-time\fR seconds.
.IP "newgroup \fIgroup\fR [\fIstatus\fR [\fIcreator\fR]]" 4
.IX Item "newgroup group [status [creator]]"
Create the specified newsgroup.  The \fIstatus\fR parameter is the fourth field
of the \fIactive\fR file entry, as described in \fIactive\fR\|(5).  If it is not an
equal sign, only the first character is used.  \fIcreator\fR should be the
identity of the person creating the group.  If the newsgroup already
exists, this is equivalent to the \f(CW\*(C`changegroup\*(C'\fR command.
.Sp
\&\fIcreator\fR, encoded in \s-1UTF\-8\s0 if given, may be omitted; if so, it will
default to the newsmaster (as specified at configure time, normally
\&\f(CW\*(C`usenet\*(C'\fR).  \fIstatus\fR may also be omitted; if so, it will default to \f(CW\*(C`y\*(C'\fR
(a normal, unmoderated group).  The combination of defaults make it possible
to use the text of the Control: header directly (although don't do this
without checking the syntactic validity of the header first).
.Sp
This command can only be done while the server is running or throttled
manually.  It will update its internal state when a \f(CW\*(C`go\*(C'\fR command is
sent.  This command updates the \fIactive.times\fR file as well.  This
command is forwarded; see \s-1NOTES\s0 below.
.IP "param \fIletter\fR \fIvalue\fR" 4
.IX Item "param letter value"
Change the specified server parameter.  \fIletter\fR is the \fBinnd\fR
command-line option to set and \fIvalue\fR is the new value.  For example:
.Sp
.Vb 1
\&    ctlinnd param i 5
.Ve
.Sp
would direct the server to allow only five incoming connections.  To
enable or disable the action of the \fB\-n\fR flag, use \f(CW\*(C`n\*(C'\fR for the letter
and \f(CW\*(C`y\*(C'\fR or \f(CW\*(C`n\*(C'\fR, respectively, for the value.
.Sp
The supported values for \fIletter\fR are \f(CW\*(C`a\*(C'\fR, \f(CW\*(C`c\*(C'\fR, \f(CW\*(C`H\*(C'\fR, \f(CW\*(C`i\*(C'\fR, \f(CW\*(C`l\*(C'\fR, \f(CW\*(C`n\*(C'\fR,
\&\f(CW\*(C`o\*(C'\fR, \f(CW\*(C`T\*(C'\fR, \f(CW\*(C`t\*(C'\fR, and \f(CW\*(C`X\*(C'\fR.
.IP "pause \fIreason\fR" 4
.IX Item "pause reason"
Pause the server so that no incoming articles are accepted.  No existing
connections are closed, but the history database is closed.  This should
be used for short-term locks, such as when replacing the history
database.  If the server was not started with the \fB\-n y\fR flag, this
command also does the equivalent of a \f(CW\*(C`readers\*(C'\fR command with \f(CW\*(C`no\*(C'\fR as the
flag and \fIreason\fR as the text, encoded in \s-1UTF\-8.\s0
.IP "perl \fIflag\fR" 4
.IX Item "perl flag"
Enable or disable Perl filtering.  This command is only available if \s-1INN\s0
was built with Perl filtering support.  If \fIflag\fR starts with \f(CW\*(C`y\*(C'\fR,
filtering is enabled; if it starts with \f(CW\*(C`n\*(C'\fR, filtering is disabled.
.Sp
When filtering is disabled, if the \fIfilter_innd.pl\fR Perl filter defined
a function \f(CW\*(C`filter_end\*(C'\fR, it will be called prior to the deactivation of
the filter.
.IP "python \fIflag\fR" 4
.IX Item "python flag"
Enable or disable Python filtering.  This command is only available if \s-1INN\s0
was built with Python filtering support.  If \fIflag\fR starts with \f(CW\*(C`y\*(C'\fR,
filtering is enabled; if it starts with \f(CW\*(C`n\*(C'\fR, filtering is disabled.
.IP "readers \fIflag\fR \fItext\fR" 4
.IX Item "readers flag text"
Allow or disallow readers.  If \fIflag\fR starts with the letter \f(CW\*(C`n\*(C'\fR, then
reading is disallowed by causing the server to pass \fItext\fR as the value
of the \fB\-r\fR flag to \fBnnrpd\fR.  If \fIflag\fR starts with the letter \f(CW\*(C`y\*(C'\fR and
\&\fItext\fR is either an empty string or the same string, encoded in \s-1UTF\-8,\s0 that
was used when reading was disabled, reading will be re-enabled.
.Sp
This command has no effect if \fBnnrpd\fR is being run separately rather than
spawned by \fBinnd\fR.
.IP "reject \fIreason\fR" 4
.IX Item "reject reason"
Remote connections (those that would not be handed off to \fBnnrpd\fR) are
rejected with \fIreason\fR given as the explanation, encoded in \s-1UTF\-8. \s0 Existing
connections are not closed.
.IP "reload \fIwhat\fR \fIreason\fR" 4
.IX Item "reload what reason"
Update the in-memory copy of server configuration files.  \fIwhat\fR
identifies what should be reloaded, and \fIreason\fR is reported to syslog in
the message noting the reload.
.Sp
There is no way to reload \fIinn.conf\fR, \fIstorage.conf\fR, or other
configuration files for the storage or overview backends.  To pick up
changes to those files, use \f(CW\*(C`ctlinnd xexec innd\*(C'\fR to restart \fBinnd\fR.
.Sp
If \fIwhat\fR is the empty string or the word \f(CW\*(C`all\*(C'\fR, everything is
reloaded.  If it is the word \f(CW\*(C`history\*(C'\fR, the history database is closed
and re-opened.  If it is the word \f(CW\*(C`incoming.conf\*(C'\fR, the
corresponding file is reloaded.  If it is the word \f(CW\*(C`active\*(C'\fR or
\&\f(CW\*(C`newsfeeds\*(C'\fR, both the \fIactive\fR and \fInewsfeeds\fR files are reloaded,
which will also cause all outgoing feeds to be flushed and restarted.
.Sp
If \fIwhat\fR is the word \f(CW\*(C`filter.perl\*(C'\fR, the \fIfilter_innd.pl\fR file is
reloaded.  If the Perl filter defined a function \f(CW\*(C`filter_before_reload\*(C'\fR,
it will be called prior to re-reading \fIfilter_innd.pl\fR.  If the Perl
function \f(CW\*(C`filter_after_reload\*(C'\fR is defined, it will be called after
\&\fIfilter_innd.pl\fR has been reloaded.  Reloading the Perl filter does not
enable filtering if it has been disabled; use \f(CW\*(C`perl y\*(C'\fR to do this
instead.  \fIstartup_innd.pl\fR cannot be reloaded.  This file is not
available for reloading unless \s-1INN\s0 was compiled with Perl filtering
support.
.Sp
If \fIwhat\fR is the word \f(CW\*(C`filter.python\*(C'\fR, the \fIfilter_innd.py\fR file is
reloaded.  If a Python method named \f(CW\*(C`filter_before_reload\*(C'\fR exists, it will
be called prior to re-reading \fIfilter_innd.py\fR.  If a Python method named
\&\f(CW\*(C`_\|_init_\|_\*(C'\fR exists, it will be called after \fIfilter_innd.py\fR has been
reloaded.  Reloading the Python filter does not enable filtering if it has
been disabled; use \f(CW\*(C`python y\*(C'\fR to do this.  This file is not available for
reloading unless \s-1INN\s0 was compiled with Python filtering support.
.IP "renumber \fIgroup\fR" 4
.IX Item "renumber group"
Update the low water and high water marks for \fIgroup\fR in the \fIactive\fR
file based on the information in the overview database.  Regardless of the
contents of the overview database, the high water mark will not be
decreased.  (Decreasing it may cause duplicate article numbers to be
assigned after a crash, which can cause serious problems with the
tradspool storage method.)  If \fIgroup\fR is the empty string, all
newsgroups are renumbered.  Renumber only works if overview data has been
created (if \fIenableoverview\fR is set to true in \fIinn.conf\fR).
.IP "renumberlow \fIfile\fR" 4
.IX Item "renumberlow file"
Identical to the \f(CW\*(C`lowmark\*(C'\fR command.
.IP "reserve \fIreason\fR" 4
.IX Item "reserve reason"
Require the next \f(CW\*(C`pause\*(C'\fR or \f(CW\*(C`throttle\*(C'\fR command to use \fIreason\fR as its
reason, encoded in \s-1UTF\-8. \s0 This reservation is cleared by giving an empty
string for the reason.  This is used by programs like \fBexpire\fR to coordinate
pauses and throttles of the server and avoid trampling on other instances of
themselves.
.IP "rmgroup \fIgroup\fR" 4
.IX Item "rmgroup group"
Remove the specified newsgroup.  The group is removed from the \fIactive\fR
file and its overview information is purged, making it immediately
unavailable to readers.  Unlike the \f(CW\*(C`newgroup\*(C'\fR command, this command does
not update the \fIactive.times\fR file.
.Sp
This command can only be done while the server is running or throttled
manually.  This command is forwarded; see \s-1NOTES\s0 below.
.IP "send \fIfeed\fR \fItext\fR" 4
.IX Item "send feed text"
The specified \fItext\fR is sent as a control line to the exploder \fIfeed\fR.
.IP "shutdown \fIreason\fR" 4
.IX Item "shutdown reason"
The server is shut down, with the specified reason recorded in the log and
sent to all open connections.  It is a good idea to send a \f(CW\*(C`throttle\*(C'\fR
command first so that feeds can be shut down more gracefully.
.Sp
If Perl or Python filtering is compiled in and enabled, certain functions
are called at \f(CW\*(C`throttle\*(C'\fR or \f(CW\*(C`shutdown\*(C'\fR (to save filter state to disk,
for example).  Consult the embedded filter documentation for details.
.IP "stathist (off | \fIfilename\fR)" 4
.IX Item "stathist (off | filename)"
Enable or disable generation of history performance statistics.  If the
parameter is \f(CW\*(C`off\*(C'\fR, no statistics are gathered.  Otherwise, statistics
are written to the specified file.  A parser for this file is provided in
the contrib tree of the \s-1INN\s0 distribution.
.IP "status (off | \fIinterval\fR)" 4
.IX Item "status (off | interval)"
Adjust the frequency with which \fBinnd\fR reports status information to
syslog.  Status reporting is turned off if \f(CW\*(C`off\*(C'\fR or \f(CW0\fR is given as the
argument.  Otherwise, status will be reported every \fIinterval\fR seconds.
See \fIstatus\fR in \fIinn.conf\fR\|(5) for information on how to set the default.
.IP "throttle \fIreason\fR" 4
.IX Item "throttle reason"
Close all existing incoming connections and outgoing feeds and reject new
connections.  Close the history database.  This should be used for
long-term locks or for running a large number of \f(CW\*(C`newgroup\*(C'\fR and
\&\f(CW\*(C`rmgroup\*(C'\fR commands without restarting all outgoing feeds between each
one.  (Note that changing the status of existing newsgroups when the
server is throttled cannot be done.)
.Sp
If the server was not started with the \fB\-n y\fR flag, then this
command also does the equivalent of a \f(CW\*(C`readers\*(C'\fR command with \f(CW\*(C`no\*(C'\fR as the
flag and \fIreason\fR as the text, encoded in \s-1UTF\-8.\s0
.IP "timer (off | \fIinterval\fR)" 4
.IX Item "timer (off | interval)"
Adjust the frequency with which \fBinnd\fR reports performance information to
syslog.  Performance monitoring is turned off if \f(CW\*(C`off\*(C'\fR or \f(CW0\fR is given
as the argument.  Otherwise, statistics will be reported every \fIinterval\fR
seconds to syslog.  See \fItimer\fR in \fIinn.conf\fR\|(5) for information on how to
set the default.
.IP "trace \fIitem\fR \fIflag\fR" 4
.IX Item "trace item flag"
Turn tracing on or off for the specified \fIitem\fR.  \fIflag\fR should start
with the letter \f(CW\*(C`y\*(C'\fR or \f(CW\*(C`n\*(C'\fR to turn tracing on or off, respectively.  If
\&\fIitem\fR starts with a number, tracing is set up for the specified \fBinnd\fR
channel, which must be an incoming \s-1NNTP\s0 feed.  If it starts with the
letter \f(CW\*(C`i\*(C'\fR, general \fBinnd\fR tracing is turned on or off.  If it starts
with the letter \f(CW\*(C`n\*(C'\fR, future \fBnnrpd\fR processes spawned by \f(CW\*(C`innd\*(C'\fR will or
will not be passed the \fB\-t\fR flag, as appropriate.  This will not affect
any \fBnnrpd\fR processes already running, or \fBnnrpd\fR processes started by
some means other than \fBinnd\fR.
.IP "xabort \fIreason\fR" 4
.IX Item "xabort reason"
Log the specified \fIreason\fR and then abort.  On most systems, this will
cause \fBinnd\fR to dump a core file.  This is only useful for debugging.
.IP "xexec \fIpath\fR" 4
.IX Item "xexec path"
Shut down the server, but then rather than exiting, exec \fBinnd\fR with all
of its original arguments except for \fB\-r\fR.  \fIpath\fR may be either \f(CW\*(C`innd\*(C'\fR
or an empty string, both of which are equivalent.  Any other value is an
error.
.Sp
This is the easiest way to start a new copy of \fBinnd\fR after upgrading or
reload configuration files that can't be reloaded via the \f(CW\*(C`reload\*(C'\fR
command.
.SH "NOTES"
.IX Header "NOTES"
In addition to being acted on by the server, certain commands can be
forwarded to an appropriate child process.  If the site receiving the
command is an exploder (such as \fBbuffchan\fR) or a funnel that feeds into
an exploder, the command can be forwarded.  In this case, the server will
send a command line to the exploder that consists of the \fBctlinnd\fR
command name.  If the site funnels into an exploder that has an asterisk
(\f(CW\*(C`*\*(C'\fR) in its \f(CW\*(C`W\*(C'\fR flag (see \fInewsfeeds\fR\|(5) for more information on feed
specifications), the site name will be appended to the command; otherwise,
no argument is appended.
.SH "BUGS"
.IX Header "BUGS"
\&\fBctlinnd\fR uses Unix domain sockets on most systems to communicate with
\&\fBinnd\fR and is therefore limited by whatever maximum packet size the
operating system imposes on Unix domain datagrams.  This may mean that
server replies are limited to 4\ \s-1KB\s0 on some systems.
.SH "HISTORY"
.IX Header "HISTORY"
Written by Rich \f(CW$alz\fR <rsalz@uunet.uu.net> for InterNetNews.  Rewritten in
\&\s-1POD\s0 by Russ Allbery <eagle@eyrie.org>.
.PP
\&\f(CW$Id:\fR ctlinnd.pod 9767 2014\-12\-07 21:13:43Z iulius $
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIactive\fR\|(5), \fIactive.times\fR\|(5), \fIbuffchan\fR\|(8), \fIincoming.conf\fR\|(5), \fIinnd\fR\|(8),
\&\fIinndcomm\fR\|(3), \fIinn.conf\fR\|(5), \fInewsfeeds\fR\|(5), \fInnrpd\fR\|(8).
