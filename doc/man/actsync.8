.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "ACTSYNC 8"
.TH ACTSYNC 8 "2016-11-06" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
actsync, actsyncd \- Synchronize newsgroups
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBactsync\fR [\fB\-AkmT\fR] [\fB\-b\fR \fIhostid\fR] [\fB\-d\fR \fIhostid\fR] [\fB\-g\fR \fImax\fR]
[\fB\-i\fR \fIignore-file\fR] [\fB\-I\fR \fIhostid\fR] [\fB\-l\fR \fIhostid\fR] [\fB\-n\fR \fIname\fR]
[\fB\-o\fR \fIformat\fR] [\fB\-p\fR \fImin-unchanged\fR] [\fB\-q\fR \fIhostid\fR]
[\fB\-s\fR \fIsize\fR] [\fB\-t\fR \fIhostid\fR] [\fB\-v\fR \fIverbosity\fR] [\fB\-w\fR \fIseconds\fR]
[\fB\-z\fR \fIseconds\fR] [\fIhost\fR] \fIhost\fR
.PP
\&\fBactsyncd\fR \fIconfig\fR [\fIdebug-level\fR [\fIdebug-format\fR]]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBactsync\fR permits one to synchronize, compare, or merge two \fIactive\fR
files.  With this utility one may add, change, or remove newsgroups on the
local news server to make it similar to the list of the newsgroups found on
another system or file.  The synchronization need not be exact.  Local
differences in newsgroup lists may be maintained and preserved.  Certain
newsgroup errors may be detected and optionally corrected.
.PP
There are several reasons to run \fBactsync\fR (or \fBactsyncd\fR) on a periodic
basis.  Among the reasons are:
.IP "\(bu" 2
A control message to add, change or remove a newsgroup may fail to reach
your site.
.IP "\(bu" 2
Your \fIcontrol.ctl\fR may be out of date or incomplete.
.IP "\(bu" 2
News articles for a new newsgroup may arrive ahead (sometimes days ahead)
of the control message.
.IP "\(bu" 2
Control messages may be forged, thus bypassing the restrictions
found in \fIcontrol.ctl\fR unless you set up \s-1PGP\s0 authentication (and even
then, not all hierarchies use \s-1PGP\s0 authentication).
.IP "\(bu" 2
Your \fIactive\fR file may have been trashed.
.PP
If either \fIhost\fR argument begins with \f(CW\*(C`.\*(C'\fR or \f(CW\*(C`/\*(C'\fR, it is assumed to be
the name of a file containing information in the \fIactive\fR\|(5) format.  The
\&\fIgetlist\fR\|(1) utility may be used to obtain a copy of a remote system's \fIactive\fR
file via its \s-1NNTP\s0 server, or an \s-1FTP\s0 client program can retrieve such a
file from an \s-1FTP\s0 archive (such as ftp.isc.org available in both \s-1FTP\s0 and \s-1HTTPS
\&\s0<https://ftp.isc.org/pub/usenet/CONFIG/active>; see more about this below).
Newsgroup information from a file may be treated as if it was obtained
from a host.  In this man page, the \fIhost\fR arguments on the command line
are called hosts, even though they may be file names.
.PP
If a host argument does not begin with \f(CW\*(C`.\*(C'\fR or \f(CW\*(C`/\*(C'\fR, it is assumed to be a
hostname or Internet address.  In this case, \fBactsync\fR will attempt to
use the \s-1NNTP\s0 protocol to obtain a copy of the specified system's
\&\fIactive\fR file.  If the host argument contains \f(CW\*(C`:\*(C'\fR, the right side will be
considered the port to connect to on the remote system.  If no port number
is specified, \fBactsync\fR will connect to port \f(CW119\fR.
.PP
Regardless how the \fIactive\fR file information is obtained, the actions of
\&\fBactsync\fR remain the same.
.PP
The first host specified is taken to be the local host, the one where any
changes would be made.  The second host specified is the remote host that
is being synchronized with.  If only one host is specified, it is assumed
to be the remote host to synchronize with, and the local host is assumed
to be the default local \s-1NNTP\s0 server as specified by the \s-1NNTPSERVER\s0
environment variable or by the \fIserver\fR value found in \fIinn.conf\fR.
.PP
If either host is specified as \f(CW\*(C`\-\*(C'\fR, the default server will be used for
that host, determined as described above.
.PP
The newsgroup synchronization, by default, involves all newsgroups found
on both hosts.  One may also synchronize a subset of newsgroups by
directing \fBactsync\fR to ignore certain newsgroups from both systems.  Only
newsgroups with valid names will be synchronized.  To be valid, a
newsgroup name must consist only of alphanumeric characters, \f(CW\*(C`.\*(C'\fR, \f(CW\*(C`+\*(C'\fR,
\&\f(CW\*(C`\-\*(C'\fR, and \f(CW\*(C`_\*(C'\fR.  One may not have two \f(CW\*(C`.\*(C'\fR characters in a row.  The first
character must be alphanumeric, as must any character following \f(CW\*(C`.\*(C'\fR.
The name may not end in a \f(CW\*(C`.\*(C'\fR character.
.PP
The \fBactsyncd\fR daemon provides a convenient interface to configure and
run \fBactsync\fR.  If a host is not initially reachable, the daemon will
retry up to 9 additional times, waiting 6 minutes before each retry.  This
daemon runs in the foreground, sending output to standard output and
standard error.  It then uses \fImod\-active\fR\|(8) to update the \fIactive\fR file
if there are commands for \fBctlinnd\fR in its output.
.PP
The configuration filename for the daemon is given as a command line
argument, usually \fIactsync.cfg\fR in \fIpathetc\fR.  The config file can
contain the following options:
.PP
.Vb 4
\&    host=<host>
\&    ftppath=<path\-to\-active>
\&    ignore_file=<ignore\-file>
\&    flags=<actsync\-options>
.Ve
.PP
The host=, ignore_file=, and flags= lines are mandatory.  Each keyword must
start at the beginning of the line, and there may be no whitespace before
the \f(CW\*(C`=\*(C'\fR character.  Blank lines are ignored, as are comment lines that
start with \f(CW\*(C`#\*(C'\fR.  Any other lines may produce undefined results.
.PP
The <host> setting refers to the second (remote) \fIhost\fR parameter to
\&\fBactsync\fR.  If <path\-to\-active> is provided, <host> is accessed as an \s-1FTP\s0
server, retrieving the file named.  If the filename ends in \f(CW\*(C`.gz\*(C'\fR or
\&\f(CW\*(C`.Z\*(C'\fR, it will be automatically uncompressed after retrieval.
<ignore\-file> names the ignore file used by \fBactsync\fR (the \fB\-i\fR option).
<actsync\-options> contains any other flags that you wish to pass to \fBactsync\fR.
.PP
Note that one should not include \fB\-i\fR or \fB\-o\fR options in the flags=
line; they are automatically taken care of by \fBactsyncd\fR.
.PP
One may produce a trial \fBactsyncd\fR run without changing anything on the
server by supplying the \fIdebug-level\fR argument:
.PP
.Vb 1
\&    actsyncd <pathetc>/actsync.cfg 2
.Ve
.PP
The \fIdebug-level\fR causes \fBactsyncd\fR to run \fBactsync\fR with a \fB\-v\fR
\&\fIdebug-level\fR flag (overriding any \fB\-v\fR flag on the flags= line), not
make any changes to the \fIactive\fR file, write a new \fIactive\fR file to
standard output, and write debug messages to standard error.
.PP
If the \fIdebug-format\fR argument is also given to \fBactsyncd\fR, the data
written to standard output will be in \fB\-o \f(BIdebug-format\fB\fR instead of in
\&\f(CW\*(C`\-o a1\*(C'\fR format.
.PP
\&\s-1INN\s0 comes with default values of \f(CW\*(C`ftp.isc.org\*(C'\fR for <host> and
\&\f(CW\*(C`/pub/usenet/CONFIG/active.gz\*(C'\fR for <path\-to\-active>.  You can read about the
policies used for maintaining that \fIactive\fR file at
<https://ftp.isc.org/pub/usenet/CONFIG/README>.  Consider synchronizing
from this file on a daily basis by using \fBcron\fR.
.SH "OPTIONS"
.IX Header "OPTIONS"
\&\fBactsync\fR takes the following options.
.PP
In all of the following options, the \fIhostid\fR parameter takes one of the
following values:
.PP
.Vb 5
\&    0    neither server
\&    1    local default server
\&    2    remote server
\&    12   both servers
\&    21   both servers
.Ve
.PP
In other words, \f(CW1\fR refers to the local host (the first \fIhost\fR argument
on the \fBactsync\fR command line) and \f(CW2\fR refers to the remote host (the
second \fIhost\fR argument, or the only one if only one is given).
.IP "\fB\-A\fR" 4
.IX Item "-A"
\&\fBactsync\fR tries to authenticate before issuing the \s-1LIST\s0 command.
.IP "\fB\-b\fR \fIhostid\fR" 4
.IX Item "-b hostid"
This flag causes \fBactsync\fR to ignore for synchronization purposes
newsgroups with \f(CW\*(C`bork.bork.bork\*(C'\fR\-style names (newsgroups whose last 3
components are identical).  For example, the following newsgroups have
bork-style names:
.Sp
.Vb 3
\&    alt.helms.dork.dork.dork
\&    alt.auto.accident.sue.sue.sue
\&    alt.election.vote.vote.vote
.Ve
.Sp
The default is \f(CW\*(C`\-b 0\*(C'\fR; no newsgroups are ignored because of bork-style
names.
.IP "\fB\-d\fR \fIhostid\fR" 4
.IX Item "-d hostid"
This flag causes \fBactsync\fR to ignore newsgroups that have all numeric
path components.  For example, the following newsgroups have numeric path
components:
.Sp
.Vb 4
\&    alt.prime.chongo.23209
\&    391581.times.2.to_the.216193.power.\-1
\&    99.bottles.of.treacle.on.the.wall
\&    linfield.class.envio_bio.101.d
.Ve
.Sp
The newsgroups directory of a newsgroup with a all numeric component
could conflict with an article from another group if stored using the
tradspool storage method; see \fIstorage.conf\fR\|(5).  For example, the directory
for the first newsgroup listed above is the same path as article number
23209 from the newsgroup:
.Sp
.Vb 1
\&    alt.prime.chongo
.Ve
.Sp
The default is \f(CW\*(C`\-d 0\*(C'\fR; all numeric newsgroups from both hosts will be
processed.
.IP "\fB\-g\fR \fImax\fR" 4
.IX Item "-g max"
Ignore any newsgroup with more than \fImax\fR levels.  For example, \f(CW\*(C`\-g 6\*(C'\fR
would ignore:
.Sp
.Vb 3
\&    alt.feinstien.votes.to.trash.freedom.of.speech
\&    alt.senator.exon.enemy.of.the.internet
\&    alt.crypto.export.laws.dumb.dumb.dumb
.Ve
.Sp
but would not ignore:
.Sp
.Vb 3
\&    alt.feinstien.acts.like.a.republican
\&    alt.exon.amendment
\&    alt.crypto.export.laws
.Ve
.Sp
If \fImax\fR is \f(CW0\fR, then the max level feature is disabled.
.Sp
By default, the max level feature is disabled.
.IP "\fB\-i\fR \fIignore-file\fR" 4
.IX Item "-i ignore-file"
The \fIignore-file\fR, usually \fIactsync.ign\fR in \fIpathetc\fR, allows one to
have a fine degree of control over which newsgroups are ignored.  It
contains a set of rules that specifies which newsgroups will be checked
and which will be ignored.
.Sp
By default, these rules apply to both hosts.  This can be modified by
using the \fB\-I\fR flag.
.Sp
Blank lines and text after a \f(CW\*(C`#\*(C'\fR are considered comments and are ignored.
.Sp
Rule lines consist of tokens separated by whitespace.  Rule lines may be
one of two forms:
.Sp
.Vb 2
\&    c <newsgroup> [<type> ...]
\&    i <newsgroup> [<type> ...]
.Ve
.Sp
If the rule begins with a \f(CW\*(C`c\*(C'\fR, the rule requests certain newsgroups to be
checked.  If the rule begins with an \f(CW\*(C`i\*(C'\fR, the rule requests certain
newsgroups to be ignored.  The <newsgroup> field may be a specific
newsgroup, or a \fIuwildmat\fR\|(3) pattern.
.Sp
If one or more <type>s are specified, then the rule applies to the
newsgroup only if it is of the specified type.  Types refer to the 4th field
of the \fIactive\fR file; that is, a type may be one of:
.Sp
.Vb 6
\&    y
\&    n
\&    m
\&    j
\&    x
\&    =group.name
.Ve
.Sp
Unlike \fIactive\fR files, the \f(CW\*(C`group.name\*(C'\fR in an alias type may be a newsgroup
name or a \fIuwildmat\fR\|(3) pattern.  Also, \f(CW\*(C`=\*(C'\fR is equivalent to \f(CW\*(C`=*\*(C'\fR.
.Sp
On each rule line, no pattern type may be repeated.  For example, one
may not have more than one type that begins with \f(CW\*(C`=\*(C'\fR, per line.  However,
one may achieve an effect equivalent to using multiple \f(CW\*(C`=\*(C'\fR types by using
multiple rule lines affecting the same newsgroup.
.Sp
By default, all newsgroups are candidates to be checked.  If no \fIignore-file\fR
is specified, or if the ignore file contains no rule lines, all newsgroups
will be checked.  If an ignore file is used, each newsgroup in turn is
checked against the ignore file.  If multiple lines match a given newsgroup,
the last line in the ignore file is used.
.Sp
For example, consider the following ignore file lines:
.Sp
.Vb 3
\&    i *.general
\&    c *.general m
\&    i nsa.general
.Ve
.Sp
The newsgroups ba.general and mod.general would be synchronized if
moderated and ignored if not moderated.  The newsgroup nsa.general would
be ignored regardless of moderation status.  All newsgroups not matching
*.general would be synchronized by default.
.IP "\fB\-I\fR \fIhostid\fR" 4
.IX Item "-I hostid"
This flag restricts which hosts are affected by the ignore file.  This
flag may be useful in conjunction with the \fB\-m\fR flag.  For example:
.Sp
.Vb 1
\&    actsync \-i actsync.ign \-I 2 \-m host1 host2
.Ve
.Sp
will keep all newsgroups currently on host1.  It will also only
compare host1 groups with non-ignored newsgroups from host2.
.Sp
The default is \f(CW\*(C`\-I 12\*(C'\fR; newsgroups from both hosts are ignored per the
file specified with \fB\-i\fR.
.IP "\fB\-k\fR" 4
.IX Item "-k"
By default, any newsgroup on the local host that has an invalid name will
be considered for removal.  This causes \fBactsync\fR simply ignore such
newsgroups.  This flag, used in combination with \fB\-m\fR, will prevent any
newsgroup from being scheduled for removal.
.IP "\fB\-l\fR \fIhostid\fR" 4
.IX Item "-l hostid"
This flag causes problem newsgroups of type \f(CW\*(C`=\*(C'\fR to be considered as
errors.  Newsgroups of type \f(CW\*(C`=\*(C'\fR are newsgroups \fIactive\fR entries that have a
fourth field that begins with \f(CW\*(C`=\*(C'\fR; i.e., newsgroups that are aliased to
other newsgroups.  A problem newsgroup is one for which one of the
following is true:
.RS 4
.IP "\(bu" 2
Aliased to itself.
.IP "\(bu" 2
In an alias chain that loops around to itself.
.IP "\(bu" 2
In an alias chain longer than 16 groups.
.IP "\(bu" 2
Aliased to a non-existant newsgroup.
.IP "\(bu" 2
Aliased to a newsgroup that has an error of some kind.
.RE
.RS 4
.Sp
However, a newsgroup that is equivalent to an ignored newsgroup is not a
problem.
.Sp
The default is \f(CW\*(C`\-l 12\*(C'\fR:  problem newsgroups from both hosts are marked
as errors.
.RE
.IP "\fB\-m\fR" 4
.IX Item "-m"
Merge newsgroups instead of sync.  By default, if a newsgroup exists on
the local host but not the remote, it will be scheduled to be removed.
This flag disables this process, permitting newsgroups unique to the local
host to be kept.
.IP "\fB\-n\fR \fIname\fR" 4
.IX Item "-n name"
Depending on \fB\-o\fR, the \fIctlinnd\fR\|(8) command may be used to create
newsgroups as necessary.  When this is done, the default creator name used
is \f(CW\*(C`actsync\*(C'\fR.  This flag changes the creator name to \fIname\fR.
.IP "\fB\-o\fR \fIformat\fR" 4
.IX Item "-o format"
Determine the output or action format of this utility.  \fIformat\fR may be
one of:
.RS 4
.IP "a" 4
.IX Item "a"
Output in \fIactive\fR\|(5) format.
.IP "a1" 4
.IX Item "a1"
Output in \fIactive\fR\|(5) format and output non-error ignored groups from the
local host.
.IP "ak" 4
.IX Item "ak"
Output in \fIactive\fR\|(5) format, but use the high and low (2nd and 3rd active
fields) values from the remote host for any newsgroup being created.
.IP "aK" 4
.IX Item "aK"
Output in \fIactive\fR\|(5) format, but use the high and low (2nd and 3rd active
fields) values from the remote host for all newsgroups found on that host.
.IP "a1k" 4
.IX Item "a1k"
Output in \fIactive\fR\|(5) format, but use the high and low (2nd and 3rd active
fields) values from the remote host for any newsgroup being created and
output non-error ignored groups from the local host.
.IP "a1K" 4
.IX Item "a1K"
Output in \fIactive\fR\|(5) format, but use the high and low (2nd and 3rd active
fields) values from the remote host for all newsgroups found on that host
and output non-error ignored groups from the local host.
.IP "ak1" 4
.IX Item "ak1"
Same as \f(CW\*(C`a1k\*(C'\fR.
.IP "aK1" 4
.IX Item "aK1"
Same as \f(CW\*(C`a1K\*(C'\fR.
.IP "c" 4
.IX Item "c"
Output as commands to \fBctlinnd\fR.
.IP "x" 4
.IX Item "x"
No output.  Instead, directly run \fBctlinnd\fR commands.
.IP "xi" 4
.IX Item "xi"
No output.  Instead, directly run \fBctlinnd\fR commands in an interactive
mode.
.RE
.RS 4
.Sp
The \f(CW\*(C`a\*(C'\fR, \f(CW\*(C`a1\*(C'\fR, \f(CW\*(C`ak\*(C'\fR, \f(CW\*(C`aK\*(C'\fR, \f(CW\*(C`a1k\*(C'\fR, \f(CW\*(C`a1K\*(C'\fR, \f(CW\*(C`ak1\*(C'\fR, and \f(CW\*(C`aK1\*(C'\fR style
formats allow one to format new \fIactive\fR file instead of producing \fBctlinnd\fR
commands.  They use high and low values of \f(CW0000000000\fR and \f(CW0000000001\fR
respectively for newsgroups that are created unless otherwise specified.
The \f(CW\*(C`ak\*(C'\fR and \f(CW\*(C`aK\*(C'\fR variants change the high and low values (2nd and
3rd \fIactive\fR fields).  In the case of \f(CW\*(C`ak\*(C'\fR, newsgroups created take their
high and low values from the remote host.  In the case of \f(CW\*(C`aK\*(C'\fR, all
newsgroups found on the remote host take their high and low values from
it.
.Sp
The \f(CW\*(C`c\*(C'\fR format produces \fBctlinnd\fR commands.  No actions are taken
because \fBactsync\fR simply prints \fBctlinnd\fR commands on standard output.
This output format is useful to let you see how the local host will be
affected by the sync (or merge) with the remote host.
.Sp
The sync (or merge) may be accomplished directly by use of the \f(CW\*(C`x\*(C'\fR or
\&\f(CW\*(C`xi\*(C'\fR format.  With this format, \fBactsync\fR uses the \fIexecl\fR\|(2) system call
to directly execute \fBctlinnd\fR commands.  The output of such exec calls
may be seen if the verbosity level is at least \f(CW2\fR.
.Sp
The \fBactsync\fR utility will pause for 4 seconds before each command is
executed if \f(CW\*(C`\-o x\*(C'\fR is selected.  See the \fB\-z\fR flag below for
discussion of this delay and how to customize it.
.Sp
The \f(CW\*(C`xi\*(C'\fR format interactively prompts on standard output and reads
directives on standard input.  One may pick and choose changes using this
format.
.Sp
Care should be taken when producing \fIactive\fR\|(5) formatted output.  One
should check to be sure that \fBactsync\fR exited with a zero status prior to
using such output.  Also one should realize that such output will not
contain lines ignored due to \fB\-i\fR even if \f(CW\*(C`\-p 100\*(C'\fR is used.
.Sp
By default, \f(CW\*(C`\-o c\*(C'\fR is assumed.
.RE
.IP "\fB\-p\fR \fImin-unchanged\fR" 4
.IX Item "-p min-unchanged"
By default, the \fBactsync\fR utility has safeguards against performing
massive changes.  If fewer than \fImin-unchanged\fR percent of the non-ignored
lines from the local host remain unchanged, no actions (output, execution,
etc.) are performed and \fBactsync\fR exits with a non-zero exit status.
The \fImin-unchanged\fR value may be a floating point value such as \f(CW66.667\fR.
.Sp
A change is a local newsgroup line that was removed, added, changed,
or found to be in error.  Changing the 2nd or 3rd \fIactive\fR fields via
\&\f(CW\*(C`\-o ak\*(C'\fR or \f(CW\*(C`\-o aK\*(C'\fR are not considered changes by \fB\-p\fR.
.Sp
To force \fBactsync\fR to accept any amount of change, use the \f(CW\*(C`\-p 0\*(C'\fR
option.  To force \fBactsync\fR to reject any changes, use the \f(CW\*(C`\-p 100\*(C'\fR
option.
.Sp
Care should be taken when producing \fIactive\fR\|(5) formatted output.  One
should check to be sure that \fBactsync\fR exited with a zero status prior to
using such output.  Also one should realize that such output will not
contain lines ignored due to \fB\-i\fR even if \f(CW\*(C`\-p 100\*(C'\fR is used.
.Sp
By default, 96% of the lines not ignored in the first \fIhost\fR argument
on the \fBactsync\fR command line must be unchanged.  That is, by default,
\&\f(CW\*(C`\-p 96\*(C'\fR is assumed.
.IP "\fB\-q\fR \fIhostid\fR" 4
.IX Item "-q hostid"
By default, all newsgroup errors are reported on standard error.  This
flag quiets errors from the specified \fIhostid\fR.
.IP "\fB\-s\fR \fIsize\fR" 4
.IX Item "-s size"
If \fIsize\fR is greater than 0, then ignore newsgroups with names longer
than \fIsize\fR and ignore newsgroups aliased (by following \f(CW\*(C`=\*(C'\fR chains) to
names longer than \fIsize\fR.  Length checking is performed on both the local
and remote hosts.
.Sp
By default, \fIsize\fR is \f(CW0\fR and thus no length checking is performed.
.IP "\fB\-t\fR \fIhostid\fR" 4
.IX Item "-t hostid"
Ignore improper newsgroups consisting of only a top component from the
specified \fIhostid\fR.  The following newsgroups are considered proper
newsgroups despite top only names and therefore are exempt from this flag:
.Sp
.Vb 5
\&    control
\&    general
\&    junk
\&    test
\&    to
.Ve
.Sp
For example, the following newsgroup names are improper because they only
contain a top level component:
.Sp
.Vb 4
\&    dole_for_pres
\&    dos
\&    microsoft
\&    windows95
.Ve
.Sp
The default is \f(CW\*(C`\-t 2\*(C'\fR; that is, all improper top-level-only newsgroups
from the remote host are ignored.
.IP "\fB\-T\fR" 4
.IX Item "-T"
This flag causes newsgroups on the remote host in new hierarchies to be
ignored.  Normally a newsgroup which only exists on the remote host,
chongo.was.here for example, is created on the local host.  However, if
this flag is given and the local host does not have any other newsgroups
in the same hierarchy (chongo.* in this case), the newsgroup in question
will be ignored and will not be created on the local host.
.IP "\fB\-v\fR \fIverbosity\fR" 4
.IX Item "-v verbosity"
By default, \fBactsync\fR is not verbose.  This flag controls the verbosity
level as follows:
.RS 4
.IP "0" 2
No debug or status reports (default).
.IP "1" 2
.IX Item "1"
Print summary, but only if work was needed or done.
.IP "2" 2
.IX Item "2"
Print actions, exec output, and summary, but only if work was needed or
done.
.IP "3" 2
.IX Item "3"
Print actions, exec output, and summary.
.IP "4" 2
.IX Item "4"
Full debug output.
.RE
.RS 4
.RE
.IP "\fB\-w\fR \fIseconds\fR" 4
.IX Item "-w seconds"
If \f(CW\*(C`\-o x\*(C'\fR or \f(CW\*(C`\-o xi\*(C'\fR is selected, \fBctlinnd\fR will wait \fIseconds\fR seconds
before timing out.  The default value is \f(CW\*(C`\-w 30\*(C'\fR.
.IP "\fB\-z\fR \fIseconds\fR" 4
.IX Item "-z seconds"
If \f(CW\*(C`\-o x\*(C'\fR is selected, \fBactsync\fR will pause for \fIseconds\fR seconds
before each command is executed.  This helps prevent \fBinnd\fR from being
busied-out if a large number of \fBctlinnd\fR commands are needed.  One can
entirely disable this sleeping by using \f(CW\*(C`\-z 0\*(C'\fR.
.Sp
By default, \fBactsync\fR will pause for \f(CW4\fR seconds before each command is
executed if \f(CW\*(C`\-o x\*(C'\fR is selected.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Determine the difference (but don't change anything) between your
newsgroup set and uunet's set:
.PP
.Vb 1
\&    actsync news.uu.net
.Ve
.PP
Same as above, with full debug and progress reports:
.PP
.Vb 1
\&    actsync \-v 4 news.uu.net
.Ve
.PP
Force a site to have the same newsgroups as some other site:
.PP
.Vb 1
\&    actsync \-o x master
.Ve
.PP
This may be useful to sync a slave site to its master, or to sync internal
site to a gateway.
.PP
Compare your site with uunet, disregarding local groups and certain local
differences with uunet.  Produce a report if any differences were
encountered:
.PP
.Vb 1
\&    actsync \-v 2 \-i actsync.ign news.uu.net
.Ve
.PP
where \fIactsync.ign\fR contains:
.PP
.Vb 3
\&    # Don\*(Aqt compare to.* groups as they will differ.
\&    #
\&    i       to.*
\&
\&    # These are our local groups that nobody else
\&    # (should) carry.  So ignore them for the sake
\&    # of the compare.
\&    #
\&    i       nsa.*
\&
\&    # These groups are local favorites, so keep them
\&    # even if uunet does not carry them.
\&    #
\&    i       ca.dump.bob.dorman
\&    i       ca.keep.bob.dorman
\&    i       alt.tv.dinosaurs.barney.die.die.die
\&    i       alt.tv.dinosaurs.barney.love.love.love
\&    i       alt.sounds.*    =alt.binaries.sounds.*
.Ve
.PP
To interactively sync against news.uu.net, using the same ignore file:
.PP
.Vb 1
\&    actsync \-o xi \-v 2 \-i actsync.ign news.uu.net
.Ve
.PP
Based on newsgroups that you decided to keep, one could make changes to
the \fIactsync.ign\fR file:
.PP
.Vb 3
\&    # Don\*(Aqt compare to.* groups as they will differ.
\&    #
\&    i       to.*
\&
\&    # These are our local groups that nobody else
\&    # (should) carry.  So ignore them for the sake
\&    # of the compare.
\&    #
\&    i       nsa.*
\&
\&    # These groups are local favorites, so keep them
\&    # even if uunet does not carry them.
\&    #
\&    i       ca.dump.bob.dorman
\&    i       alt.tv.dinosaurs.barney.die.die.die
\&    i       alt.sounds.*    =alt.binaries.sounds.*
\&
\&    # Don\*(Aqt sync test groups, except for ones that are
\&    # moderated or that are under the gnu hierarchy.
\&    #
\&    i       *.test
\&    c       *.test m        # check moderated test groups
\&    c       gnu.*.test
\&    c       gnu.test        # just in case it ever exists
.Ve
.PP
Automatic processing may be set up by using the following \fIactsync.cfg\fR
file:
.PP
.Vb 2
\&    # Host to sync off of (host2).
\&    host=news.uu.net
\&
\&    # Location of the ignore file.
\&    ignore_file=<pathetc in inn.conf>/actsync.ign
\&
\&    # Where news articles are kept.
\&    spool=<patharticles in inn.conf>
\&
\&    # actsync(8) flags
\&    #
\&    # Automatic execs, report if something was done,
\&    # otherwise don\*(Aqt say anything, don\*(Aqt report
\&    # uunet active file problems, just ignore
\&    # the affected entries.
\&    flags=\-o x \-v 2 \-q 2
.Ve
.PP
and then by running \fBactsyncd\fR with the path to the config file:
.PP
.Vb 1
\&    actsyncd <pathetc>/actsync.cfg
.Ve
.PP
The command
.PP
.Vb 1
\&    actsyncd <pathetc>/actsync.cfg 4 >cmd.log 2>dbg.log
.Ve
.PP
will operate in debug mode, not change the \fIactive\fR file, write
\&\fBctlinnd\fR style commands to \fIcmd.log\fR, and write debug statements to
\&\fIdbg.log\fR.
.PP
To check only the major hierarchies against news.uu,net, use the following
\&\fIactsync.ign\fR file:
.PP
.Vb 3
\&    # By default, ignore everything.
\&    #
\&    i       *
\&
\&    # Check the major groups.
\&    #
\&    c       alt.*
\&    c       comp.*
\&    c       gnu.*
\&    c       humanities.*
\&    c       misc.*
\&    c       news.*
\&    c       rec.*
\&    c       sci.*
\&    c       soc.*
\&    c       talk.*
.Ve
.PP
and the command:
.PP
.Vb 1
\&    actsync \-i actsync.ign news.uu.net
.Ve
.PP
To determine the differences between your old \fIactive\fR and your current
default server:
.PP
.Vb 1
\&    actsync <pathetc>/active.old \-
.Ve
.PP
To report but not fix any newsgroup problems with the current \fIactive\fR file:
.PP
.Vb 1
\&    actsync \- \-
.Ve
.PP
To detect any newsgroup errors on your local server, and to remove any
*.bork.bork.bork\-style silly newsgroup names:
.PP
.Vb 1
\&    actsync \-b 2 \- \-
.Ve
.PP
The \fIactive\fR file produced by:
.PP
.Vb 1
\&    actsync <flags> \-o x erehwon.honey.edu
.Ve
.PP
is effectively the same as the \fIactive\fR file produced by:
.PP
.Vb 9
\&    cd <pathdb>
\&    ctlinnd pause \*(Aqrunning actsync\*(Aq
\&    rm \-f active.new
\&    actsync <flags> \-o a1 erehwon.honey.edu > active.new
\&    rm \-f active.old
\&    ln active active.old
\&    mv active.new active
\&    ctlinnd reload active \*(Aqrunning actsync\*(Aq
\&    ctlinnd go \*(Aqrunning actsync\*(Aq
.Ve
.PP
It should be noted that the final method above, pausing the server and
simply replacing the \fIactive\fR file, may be faster if you are making lots
of changes.
.SH "FILES"
.IX Header "FILES"
.IP "\fIpathbin\fR/actsync" 4
.IX Item "pathbin/actsync"
The C program itself used to synchronize, compare, or merge two \fIactive\fR
files.
.IP "\fIpathbin\fR/actsyncd" 4
.IX Item "pathbin/actsyncd"
The Shell daemon which provides a convenient interface to configure and
run \fBactsync\fR.
.IP "\fIpathetc\fR/actsync.cfg" 4
.IX Item "pathetc/actsync.cfg"
The configuration file which specifies the settings to use.
.IP "\fIpathetc\fR/actsync.ign" 4
.IX Item "pathetc/actsync.ign"
The ignore file which contains a set of synchronization rules that
specifies which newsgroups will be checked and which will be ignored.
.SH "CAUTION"
.IX Header "CAUTION"
Careless use of this tool may result in the unintended addition, change,
or removal of newsgroups.  You should avoid using the \f(CW\*(C`x\*(C'\fR output format
until you are sure it will do what you want.
.SH "BUGS"
.IX Header "BUGS"
If a newsgroup appears multiple times, \fBactsync\fR will treat all copies as
errors.  However, if the group is marked for removal, only one rmgroup
will be issued.
.SH "HISTORY"
.IX Header "HISTORY"
Written by Landon Curt Noll <chongo@toad.com> for InterNetNews.  Updated
to support \s-1FTP\s0 fetching by David Lawrence <tale@isc.org>.  Converted to
\&\s-1POD\s0 by Russ Allbery <eagle@eyrie.org>.
.PP
\&\f(CW$Id:\fR actsync.pod 10097 2016\-11\-04 22:19:07Z iulius $
.PP
By Landon Curt Noll <chongo@toad.com> (chongo was here /\e../\e).
.PP
Copyright (c) Landon Curt Noll, 1993.  All rights reserved.
.PP
Permission to use and modify is hereby granted so long as this notice
remains.  Use at your own risk.  No warranty is implied.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIactive\fR\|(5), \fIctlinnd\fR\|(8), \fIgetlist\fR\|(8), \fIinn.conf\fR\|(5), \fImod\-active\fR\|(8), \fIsimpleftp\fR\|(1).
