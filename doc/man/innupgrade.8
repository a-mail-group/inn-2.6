.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "INNUPGRADE 8"
.TH INNUPGRADE 8 "2015-09-12" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
innupgrade \- Upgrade INN configuration files
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBinnupgrade\fR \fIdirectory\fR
.PP
\&\fBinnupgrade\fR [\fB\-t\fR \fItype\fR] \fB\-f\fR \fIfile\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBinnupgrade\fR is intended to be run during a major upgrade of \s-1INN\s0 to fix
the configuration files with any required changes.  If given a directory,
it will scan that directory for any files that it has updates defined for,
try to perform those updates, and replace the files with updated versions
if applying the updates resulted in any changes.  The old versions of the
files will be saved with a \f(CW\*(C`.OLD\*(C'\fR extension.
.PP
If the \fB\-f\fR flag is used, only that file will be updated.  If the file
name doesn't match the standard file name of an \s-1INN\s0 configuration file,
the optional \fB\-t\fR flag may be given to specify the type.  See
\&\*(L"\s-1EXAMPLES\*(R"\s0 for an example of this.
.PP
Currently, \fBinnupgrade\fR knows how to apply the following updates:
.IP "\fIinn.conf\fR" 2
.IX Item "inn.conf"
.RS 2
.PD 0
.IP "\(bu" 2
.PD
Quote values with whitespace and comment out keys with no values, required
for the change in configuration parsers introduced in \s-1INN\s0\ 2.4.  The new
format is not backward compatible with the previous parser, since the
previous parser will include the double-quotes in the value of the parameter.
.IP "\(bu" 2
Add the \fIhismethod\fR parameter if not found (introduced in \s-1INN\s0\ 2.4,
with the default value \f(CW\*(C`hisv6\*(C'\fR).  Rename \fInntpactsync\fR to
\&\fIincominglogfrequency\fR (since \s-1INN\s0\ 2.5).  Rename \fIaddnntppostingdate\fR
and \fIaddnntppostinghost\fR to respectively \fIaddinjectiondate\fR and
\&\fIaddinjectionpostinghost\fR (since \s-1INN\s0\ 2.6).
.IP "\(bu" 2
If the \fIoverview.fmt\fR file exists, its content is merged in
the \fIextraoverviewadvertised\fR and \fIextraoverviewhidden\fR parameters
introduced in \s-1INN\s0\ 2.5.  The file is then renamed to \fIoverview.fmt.OLD\fR.
.IP "\(bu" 2
If the \fIsasl.conf\fR file exists, its content is merged in the \fItlscapath\fR,
\&\fItlscafile\fR, \fItlscertfile\fR and \fItlskeyfile\fR parameters introduced in
\&\s-1INN\s0\ 2.5.  The file is then renamed to \fIsasl.conf.OLD\fR.
.RE
.RS 2
.RE
.IP "\fInewsfeeds\fR" 2
.IX Item "newsfeeds"
.RS 2
.PD 0
.IP "\(bu" 2
.PD
Replace the use of \fBstartinnfeed\fR with the appropriate direct invocation
of \fBinnfeed\fR or \fBimapfeed\fR.
.RE
.RS 2
.RE
.PP
A few obsolete programs or configuration files are renamed with a \f(CW\*(C`.OLD\*(C'\fR
extension by \fBinnupgrade\fR.  Obsolete man pages are directly removed.
.PP
Normally, \fBinnupgrade\fR should be run at least on the \fIpathetc\fR directory
after any upgrade of \s-1INN\s0 other than a patch release (any upgrade that changes
the first or second version numbers).  This may occur automatically during
the upgrade process.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-f\fR \fIfile\fR" 4
.IX Item "-f file"
Only act on \fIfile\fR rather than working on an entire directory.
.IP "\fB\-t\fR \fItype\fR" 4
.IX Item "-t type"
For a file specified with \fB\-f\fR, parse it and upgrade it as if it were
named \fItype\fR.  Used for upgrading files with the same syntax as normal
\&\s-1INN\s0 configuration files but with different names.  Only makes sense in
combination with \fB\-f\fR.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
Upgrade any configuration files found in \fIpathetc\fR and append a \f(CW\*(C`.OLD\*(C'\fR
extension to obsolete files in \fIpathetc\fR:
.PP
.Vb 1
\&    innupgrade <pathetc in inn.conf>
.Ve
.PP
Upgrade only \fI/news/etc/inn.conf\fR:
.PP
.Vb 1
\&    innupgrade \-f /news/etc/inn.conf
.Ve
.PP
Upgrade a file named \fIinn\-special.conf\fR that should have the same syntax
as \fIinn.conf\fR:
.PP
.Vb 1
\&    innupgrade \-t inn.conf \-f inn\-special.conf
.Ve
.PP
Any upgrade rules that apply to \fIinn.conf\fR will be applied to the
alternate file.
.SH "HISTORY"
.IX Header "HISTORY"
Written by Russ Allbery <eagle@eyrie.org> for InterNetNews.
.PP
\&\f(CW$Id:\fR innupgrade.pod 9767 2014\-12\-07 21:13:43Z iulius $
