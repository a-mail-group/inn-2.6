.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SCANLOGS 8"
.TH SCANLOGS 8 "2015-09-12" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
scanlogs \- Summarize and rotate INN log files
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBscanlogs\fR [\fBnorotate\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBscanlogs\fR summarizes the information recorded in the \s-1INN\s0 log files which
reside in the \fIpathlog\fR directory set in \fIinn.conf\fR (see \fInewslog\fR\|(5) for
further details about these log files).  It is normally invoked by the
\&\fInews.daily\fR\|(8) script which performs daily server maintenance tasks.
.PP
It invokes \f(CW\*(C`ctlinnd flushlogs\*(C'\fR to close the news and error log files,
rename them to add \f(CW\*(C`.old\*(C'\fR to the file names and open fresh news and
error logs; the \fIactive\fR file is also flushed to disk, along with the
history database.
.PP
By default, \fBscanlogs\fR rotates and cleans out the logs.  It keeps up to
\&\fIlogcycles\fR old compressed log files in \fIpathlog\fR/OLD (the \fIlogcycles\fR
parameter can be set in \fIinn.conf\fR).  \fBscanlogs\fR also keeps archives
of the \fIactive\fR file in this directory.
.PP
It invokes \fBtally.control\fR if \fInewgroup.log\fR or \fIrmgroup.log\fR exists
in \fIpathlog\fR (see the \fIcontrol.log\fR entry of \fInewslog\fR\|(5) for more
information about that).
.PP
\&\fBscanlogs\fR displays the first 50 lines of \fIerrlog\fR, \fInews.err\fR
and \fInews.crit\fR, if non-empty, and runs \fBinnreport\fR to summarize
the contents of \fInews\fR and \fInews.notice\fR, and to update the
\&\fIunwanted.log\fR file amongst other things (see more information about
that in \fIinnreport\fR\|(8)).
.SH "OPTIONS"
.IX Header "OPTIONS"
Only one option is currently accepted:
.IP "\fBnorotate\fR" 4
.IX Item "norotate"
Using this option disables the rotating and cleaning aspect of the log
processing:  the logs files are only scanned for information and no contents
are altered.  If \fBscanlogs\fR is invoked more than once a day, the \fBnorotate\fR
option should be used to prevent premature log cleaning.
.SH "FILES"
.IX Header "FILES"
See \fInewslog\fR\|(5) for the list of log files processed by \fBscanlogs\fR.
.SH "HISTORY"
.IX Header "HISTORY"
Written by Landon Curt Noll <chongo@toad.com> and Rich \f(CW$alz\fR
<rsalz@uunet.uu.net> for InterNetNews.  Converted to \s-1POD\s0 by Julien Elie.
.PP
\&\f(CW$Id:\fR scanlogs.pod 9903 2015\-06\-20 17:20:46Z iulius $
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIinn.conf\fR\|(5), \fIinnreport\fR\|(8), \fInews.daily\fR\|(8), \fInewslog\fR\|(5), \fIshlock\fR\|(1),
\&\fItally.control\fR\|(8).
