.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "MOD-ACTIVE 8"
.TH MOD-ACTIVE 8 "2015-09-12" "INN 2.6.3" "InterNetNews Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
mod\-active \- Batch processing of newsgroups creation and removal commands
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBmod-active\fR [\fIctlinnd-command-file\fR ...]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBmod-active\fR is a Perl script that updates the \fIactive\fR file based on
its input lines of \fBctlinnd\fR \f(CW\*(C`newgroup\*(C'\fR, \f(CW\*(C`rmgroup\*(C'\fR and \f(CW\*(C`changegroup\*(C'\fR
commands.  It pauses the server briefly while the existing \fIactive\fR file
is read and rewritten, which not only keeps \fBinnd\fR from updating the
\&\fIactive\fR file but also locks against other instances of \fBmod-active\fR.
.PP
The script must be run as the news user.
.PP
The input to \fBmod-active\fR can come either from one or more \fIctlinnd-command-file\fR
files named on the command line, or from the standard input.  Typically its input
is the output from the \fBdocheckgroups\fR or \fBactsync\fR commands.  Every line which
contains the string \f(CW\*(C`ctlinnd newgroup\*(C'\fR, \f(CW\*(C`ctlinnd rmgroup\*(C'\fR, or \f(CW\*(C`ctlinnd changegroup\*(C'\fR,
optionally preceded by whitespace and/or the path to \fBctlinnd\fR, is noted for
the update.  Redundant commands, such as a newgroup directive for a group
that already exists, are silently ignored.  All other lines in the input are
also silently ignored.  After the new \fIactive\fR file has been generated,
the existing one is renamed to \fIactive.old\fR and the new one is moved into place.
The script then displays the differences between the two files.  Any groups
that were added to the \fIactive\fR file are also added to the \fIactive.times\fR
file with the string \f(CW\*(C`checkgroups\-update\*(C'\fR.
.PP
Please note that no syntax checking is performed on group names by \fBmod-active\fR.
.SH "BUGS"
.IX Header "BUGS"
Though \fBinnd\fR is paused while \fBmod-active\fR works, it is not inconceivable
that there could be a conflict if something else tries to update the \fIactive\fR
file during the relatively short time that \fBmod-active\fR is working.  The two
most realistic ways for this to happen are either by an administrator
concurrently doing a manual \fBctlinnd\fR command, or by \fBinnd\fR receiving
a control message, then \fBmod-active\fR pausing the server, then the control
message handler script that \fBinnd\fR forked running its own \fBctlinnd\fR command
while \fBmod-active\fR is working.  Note that such scenarios are \fIvery\fR unlikely
to happen.
.SH "HISTORY"
.IX Header "HISTORY"
Written by David C Lawrence <tale@isc.org> for InterNetNews.  Converted to \s-1POD\s0
by Julien Elie.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIactive\fR\|(5), \fIactive.times\fR\|(5), \fIactsync\fR\|(8), \fIctlinnd\fR\|(8), \fIdocheckgroups\fR\|(8), \fIinnd\fR\|(8).
